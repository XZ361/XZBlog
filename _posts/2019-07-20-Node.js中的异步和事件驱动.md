---
layout:     post
title:      Nodejs ä¸­çš„éé˜»å¡I/Oã€å¼‚æ­¥å’Œäº‹ä»¶é©±åŠ¨
subtitle:   å›è°ƒå‡½æ•° + äº‹ä»¶é©±åŠ¨
date:       2019-07-20
author:     XZ
header-img: img/post-bg-web.jpg
catalog: true
tags:
    - æœåŠ¡ç«¯è¯­è¨€
    - node.js
---

## å‰è¨€

Node.jsä½¿ç”¨ äº‹ä»¶é©±åŠ¨æœºåˆ¶ã€å…·æœ‰éé˜»å¡çš„I/Oæ¨¡å‹è¿™æ ·çš„ç‰¹ç‚¹ï¼ŒNode.jsä¸­çš„å¤§å¤šæ•°Apiéƒ½ç”¨åˆ°äº†å¼‚æ­¥å‡½æ•°ï¼Œé‚£éº½åˆè¯¥å¦‚ä½•è·å–å¼‚æ­¥å‡½æ•°è¿”å›çš„æ•°æ®å‘ï¼åºŸè¯ä¸å¤šè¯´ï¼Œæ¥çœ‹çœ‹æœ¬æ¬¡åˆ†äº« éƒ½æœ‰å“ªäº›äº®ç‚¹å§!


## ä¸€ã€Nodejs çš„ éé˜»å¡ I/O å¼‚æ­¥ äº‹ä»¶é©±åŠ¨

>å…³é”®è¯ï¼šéé˜»å¡I/Oã€äº‹ä»¶é©±åŠ¨

### 1. éé˜»å¡I/O

       åœ¨ Javaã€ PHP æˆ–è€….net ç­‰æœåŠ¡å™¨ç«¯è¯­è¨€ä¸­ï¼Œä¼šä¸ºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚
    è€Œæ¯ä¸ªçº¿ç¨‹éœ€è¦è€—è´¹å¤§çº¦ 2MB å†…å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç†è®ºä¸Šï¼Œä¸€ä¸ª 8GB å†…å­˜çš„æœåŠ¡å™¨å¯ä»¥åŒæ—¶
    è¿æ¥çš„æœ€å¤§ç”¨æˆ·æ•°ä¸º 4000 ä¸ªå·¦å³ã€‚è¦è®© Web åº”ç”¨ç¨‹åºæ”¯æŒæ›´å¤šçš„ç”¨æˆ·ï¼Œå°±éœ€è¦å¢åŠ æœåŠ¡å™¨
    çš„æ•°é‡ï¼Œè€Œ Web åº”ç”¨ç¨‹åºçš„ç¡¬ä»¶æˆæœ¬å½“ç„¶å°±ä¸Šå‡äº†ã€‚
       Node.js ä¸ä¸ºæ¯ä¸ªå®¢æˆ·è¿æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œ **è€Œä»…ä»…ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹**ã€‚å½“æœ‰ç”¨æˆ·è¿æ¥äº†ï¼Œ
    å°±è§¦å‘ä¸€ä¸ªå†…éƒ¨äº‹ä»¶ï¼Œ**é€šè¿‡éé˜»å¡ I/Oã€äº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼Œè®© Node.js ç¨‹åºå®è§‚ä¸Šä¹Ÿæ˜¯å¹¶è¡Œçš„ã€‚**
    ä½¿ç”¨ Node.jsï¼Œä¸€ä¸ª 8GB å†…å­˜çš„æœåŠ¡å™¨ï¼Œå¯ä»¥åŒæ—¶å¤„ç†è¶…è¿‡ 4 ä¸‡ç”¨æˆ·


![](http://tva1.sinaimg.cn/large/0060lm7Tly1g4lo1ig1tfj30ks0iagmm.jpg)

### 2. Nodejs å›è°ƒå¤„ç†å¼‚æ­¥

    é”™è¯¯çš„å†™æ³•ï¼š
    function getData(){
        //æ¨¡æ‹Ÿè¯·æ±‚æ•°æ®
        var result='';
        setTimeout(function(){

            result='è¿™æ˜¯è¯·æ±‚åˆ°çš„æ•°æ®'
        },200);

        return result;
    }
    console.log(getData());/*å¼‚æ­¥å¯¼è‡´è¯·æ±‚ä¸åˆ°æ•°æ®*/

    æ­£ç¡®çš„å¤„ç†å¼‚æ­¥ï¼š
    function getData(callback){
        //æ¨¡æ‹Ÿè¯·æ±‚æ•°æ®
        var result='';

        setTimeout(function(){
            result='è¿™æ˜¯è¯·æ±‚åˆ°çš„æ•°æ®';

            callback(result);
        },200);
    }
    getData(function(data){
        console.log(data);
    })

![](http://tva1.sinaimg.cn/large/0060lm7Tly1g4mg5e99ulj30gn074mx7.jpg)

### 3ã€ Nodejs events æ¨¡å—å¤„ç†å¼‚æ­¥

    Node.js æœ‰å¤šä¸ªå†…ç½®çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ events æ¨¡å—ï¼Œå¹¶é€šè¿‡å®ä¾‹åŒ– EventEmitter
    ç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶

    // å¼•å…¥ events æ¨¡å—
    var events = require('events');
    var EventEmitter=new events.EventEmitter(); /*å®ä¾‹åŒ–äº‹ä»¶å¯¹è±¡*/

    EventEmitter.on('toparent',function(){
        console.log('æ¥æ”¶åˆ°äº†å¹¿æ’­äº‹ä»¶');
    })

    setTimeout(function(){
        console.log('å¹¿æ’­');

        EventEmitter.emit('toparent'); /*å‘é€å¹¿æ’­*/
    },1000)
    
## ç»“è¯­

OKï¼Œè¿™æ¬¡å…³äºNode.jsçš„åˆ†äº« åˆ°è¿™å°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆšå…¥é—¨çš„å°ç™½ğŸ˜œæœ‰æ·±åˆ»çš„ç†è§£ã€‚

### å‚è€ƒ

- [node.js å­¦ä¹ ç¤¾åŒº](https://http://www.nodeclass.com/)
- [node.js ä¸“ä¸šä¸­æ–‡ç¤¾åŒº](https://https://cnodejs.org/)
- [å»–é›ªå³°--nodeå­¦ä¹ ç¬”è®°](https://www.liaoxuefeng.com/wiki/1022910821149312/1023025235359040)
